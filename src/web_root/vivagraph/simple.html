<!DOCTYPE html>
<html>
    <head>
        <title>01. Create Graph. Vivagraph SVG tutorial.</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vivagraphjs/0.10.1/vivagraph.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="  crossorigin="anonymous"></script>
        <script type="text/javascript">
            function onLoad () {
                graph = Viva.Graph.graph();

                nodeSize = 20

                graphics = Viva.Graph.View.svgGraphics();

                graphics.node(function(node) {
                    if (node.data) {
                        img_url = node.data.img
                        label   = node.data.label
                    }
                    else {
                        img_url = 'icons/none.png'
                        label   = node.id
                    }

                    ui      = Viva.Graph.svg('g')
                    console.log(label)
                    svgText = Viva.Graph.svg('text') .attr('y', '+30px')
                                                     .attr('x', '-10px')
                                                     .attr('font-size', '8px')
                                                     .text(label),
                    //console.log(img)
                    img     = Viva.Graph.svg('image').attr('width', nodeSize)
                                                     .attr('height', nodeSize)
                                                     .link(img_url);
                    ui.append(svgText);
                    ui.append(img);
                    return ui;
                }).placeNode(function(nodeUI, pos) {
                    nodeUI.attr('transform',
                                'translate(' +  (pos.x - nodeSize/2) + ',' + (pos.y - nodeSize/2) + ')');
                });
               set_layout = function(layout_options) {
                    layout = Viva.Graph.Layout.forceDirected(graph,layout_options)
                }

               //layout = undefined

               //renderer = Viva.Graph.View.renderer(graph,options);
               //renderer.run();

               //renderer.zoomOut()
               run_graph = function() {
                   options =
                   {
                       layout     : layout,
                       graphics   : graphics,
                       container  : document.getElementById('graphConainer'),
                       //prerender  : true
                   }
                   renderer = Viva.Graph.View.renderer(graph,options);
                   renderer.run();
               }

            }
        </script>

        <style type='text/css'>
            #graphConainer {
                position: absolute;
                width: 100%;
                height: 100%;
            }
            #graphConainer > svg {
                width: 100%;
                height: 100%;
            }
     </style>
    </head>
    <body onload="onLoad()" style="background-color: #FFFFFF;">
        <div id='graphConainer'></div>
    </body>
</html>

